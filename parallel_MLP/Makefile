# -*- Makefile -*-
### Makefile - VHDL Makefile generated by Emacs VHDL Mode 3.38.1

# Project   : Parallel neuron
# Platform  : ModelSim
# Generated : 2020-11-30 12:03:15 jordi


# Define compilation command and options

COMPILE = vcom
OPTIONS = -2008 -2008 -work work


# Define library paths

LIBRARY-work = work


# Define library unit files

UNIT-work-arithmetic_unit = \
	$(LIBRARY-work)/arithmetic_unit/_primary.dat
UNIT-work-arithmetic_unit-structure = \
	$(LIBRARY-work)/arithmetic_unit/structure.dat
UNIT-work-fsm = \
	$(LIBRARY-work)/fsm/_primary.dat
UNIT-work-fsm-behavior = \
	$(LIBRARY-work)/fsm/behavior.dat
UNIT-work-mac = \
	$(LIBRARY-work)/mac/_primary.dat
UNIT-work-mac-behaviour = \
	$(LIBRARY-work)/mac/behaviour.dat
UNIT-work-parallel_neuron = \
	$(LIBRARY-work)/parallel_neuron/_primary.dat
UNIT-work-parallel_neuron-structure = \
	$(LIBRARY-work)/parallel_neuron/structure.dat
UNIT-work-rom_coefficients = \
	$(LIBRARY-work)/rom_coefficients/_primary.dat
UNIT-work-rom_coefficients-behavior = \
	$(LIBRARY-work)/rom_coefficients/behavior.dat
UNIT-work-shift_register = \
	$(LIBRARY-work)/shift_register/_primary.dat
UNIT-work-shift_register-behaviour = \
	$(LIBRARY-work)/shift_register/behaviour.dat
UNIT-work-types_and_constants = \
	$(LIBRARY-work)/types_and_constants/_primary.dat


# Define list of all library unit files

ALL_UNITS = \
	$(UNIT-work-arithmetic_unit) \
	$(UNIT-work-arithmetic_unit-structure) \
	$(UNIT-work-fsm) \
	$(UNIT-work-fsm-behavior) \
	$(UNIT-work-mac) \
	$(UNIT-work-mac-behaviour) \
	$(UNIT-work-parallel_neuron) \
	$(UNIT-work-parallel_neuron-structure) \
	$(UNIT-work-rom_coefficients) \
	$(UNIT-work-rom_coefficients-behavior) \
	$(UNIT-work-shift_register) \
	$(UNIT-work-shift_register-behaviour) \
	$(UNIT-work-types_and_constants)



# Rule for compiling entire design

all : \
		library \
		$(ALL_UNITS)


# Rule for cleaning entire design

clean : 
	-rm -f $(ALL_UNITS)


# Rule for creating library directory

library : \
		$(LIBRARY-work)

$(LIBRARY-work) :
	vlib $(LIBRARY-work); vmap work $(LIBRARY-work)


.PHONY : all clean library


# Rules for compiling single library units and their subhierarchy

arithmetic_unit : \
		library \
		mac \
		types_and_constants \
		$(UNIT-work-arithmetic_unit) \
		$(UNIT-work-arithmetic_unit-structure)

fsm \
FSM : \
		library \
		types_and_constants \
		$(UNIT-work-fsm) \
		$(UNIT-work-fsm-behavior)

mac \
MAC : \
		library \
		types_and_constants \
		$(UNIT-work-mac) \
		$(UNIT-work-mac-behaviour)

parallel_neuron : \
		library \
		types_and_constants \
		$(UNIT-work-parallel_neuron) \
		$(UNIT-work-parallel_neuron-structure)

rom_coefficients \
ROM_coefficients : \
		library \
		types_and_constants \
		$(UNIT-work-rom_coefficients) \
		$(UNIT-work-rom_coefficients-behavior)

shift_register : \
		library \
		types_and_constants \
		$(UNIT-work-shift_register) \
		$(UNIT-work-shift_register-behaviour)

types_and_constants : \
		library \
		$(UNIT-work-types_and_constants)


# Rules for compiling single library unit files

$(UNIT-work-arithmetic_unit) \
$(UNIT-work-arithmetic_unit-structure) : \
		rtl/arithmetic_unit.vhd \
		$(UNIT-work-mac) \
		$(UNIT-work-types_and_constants)
	$(COMPILE) $(OPTIONS) rtl/arithmetic_unit.vhd

$(UNIT-work-fsm) \
$(UNIT-work-fsm-behavior) : \
		rtl/FSM.vhd \
		$(UNIT-work-types_and_constants)
	$(COMPILE) $(OPTIONS) rtl/FSM.vhd

$(UNIT-work-mac) \
$(UNIT-work-mac-behaviour) : \
		rtl/MAC.vhd \
		$(UNIT-work-types_and_constants)
	$(COMPILE) $(OPTIONS) rtl/MAC.vhd

$(UNIT-work-parallel_neuron) \
$(UNIT-work-parallel_neuron-structure) : \
		rtl/parallel_neuron.vhd \
		$(UNIT-work-types_and_constants)
	$(COMPILE) $(OPTIONS) rtl/parallel_neuron.vhd

$(UNIT-work-rom_coefficients) \
$(UNIT-work-rom_coefficients-behavior) : \
		rtl/ROM_coefficients.vhd \
		$(UNIT-work-types_and_constants)
	$(COMPILE) $(OPTIONS) rtl/ROM_coefficients.vhd

$(UNIT-work-shift_register) \
$(UNIT-work-shift_register-behaviour) : \
		rtl/shift_register.vhd \
		$(UNIT-work-types_and_constants)
	$(COMPILE) $(OPTIONS) rtl/shift_register.vhd

$(UNIT-work-types_and_constants) : \
		rtl/types_and_constants.vhd
	$(COMPILE) $(OPTIONS) rtl/types_and_constants.vhd


### Makefile ends here
